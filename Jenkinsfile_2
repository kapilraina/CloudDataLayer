node {

	stage('Preparation') {  
 
     	checkout scm
      
 
   }
   
   stage('Build Code') {  
 
     	sh "mvn clean package"
 
   }
    
     stage('Build Image') {  
	    docker.withRegistry("https://docker.io","DockerHub"){
		    def customImage = docker.build("kapilshekharraina/clouddatalayer:${env.BUILD_ID}")
		    customImage.push("latest")
		
		    customImage.push('latest')
	    }
    }
}